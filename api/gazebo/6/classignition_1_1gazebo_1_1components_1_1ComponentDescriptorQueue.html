<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="keywords" content="Gazebo Gazebo">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gazebo Gazebo: ComponentDescriptorQueue Class Reference</title>
    <script type="text/javascript" src="https://gazebosim.org/assets/doxygen/dynsections.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="icon" type="image/x-icon" href="https://gazebosim.org/assets/icon/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
    <link href="https://gazebosim.org/assets/doxygen/doxygen.css" rel="stylesheet" type="text/css">
  </head>
    <script type="text/javascript">
      /* Replace all the "permalink" &#9670;&nbsp; icons with a unicode link
        symbol.*/
      $(document).ready(function() {
        var elems = document.getElementsByClassName("permalink");
        for (var i = 0; i < elems.length; ++i) {
          elems[i].firstChild.innerHTML="&#x1f517;";
          elems[i].firstChild.style.fontSize="18px";
        }
      });
    </script>
  </head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
    <div class="mdl-layout__drawer mdl-color--grey-100 mdl-color-text--blue-grey-50">
      <header class="mdl-color--grey-100">
        <a href="index.html"><img width="60px" src="https://gazebosim.org/assets/doxygen/gazebo_logo.svg"/></a>
        <h1 class="project_title">Gazebo Gazebo</h1>
        <h2>API Reference</h2>
        <div class="version">
        6.16.0
        </div>
      </header>
      <!-- NOTE: If you add a link to a doxygen generated page, then make
                 sure to update the required_html_fils list in
                 IgnCreateDocs.cmake -->
      <nav class="ign-navigation mdl-navigation">
        <a class="mdl-navigation__link" href="tutorials.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Tutorials</a>
        <a id="class_menu" class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">library_books</i>Classes</a>
        <a id="namespaces_menu"class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">toc</i>Namespaces</a>
        <a class="mdl-navigation__link" href="files.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Files</a>
        <a class="mdl-navigation__link" target="_blank"
           href="http://gazebosim.org">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">launch</i>Gazebo Website</a>
      </nav>
      <!-- classes sub menu -->
      <ul for="class_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link" href="classes.html">Index</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="annotated.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="hierarchy.html">Hierarchy</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions.html">Members: All</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_func.html">Members: Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_vars.html">Members: Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_type.html">Members: Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_enum.html">Members: Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_eval.html">Members: Enumerator</a>
        </li>
      </ul>
      <!-- namespaces sub menu -->
      <ul for="namespaces_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespaces.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers.html">Members</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_func.html">Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_type.html">Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_vars.html">Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_enum.html">Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_eval.html">Enumerator</a>
        </li>
      </ul>
    </div>
    <main class="mdl-layout__content mdl-color--white">
    <div id="top">
<!-- Generated by Doxygen 1.8.17 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceignition.html">ignition</a></li><li class="navelem"><a class="el" href="namespaceignition_1_1gazebo.html">gazebo</a></li><li class="navelem"><a class="el" href="namespaceignition_1_1gazebo_1_1components.html">components</a></li><li class="navelem"><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html">ComponentDescriptorQueue</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ComponentDescriptorQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class to hold the queue of component descriptors registered by translation units. This queue is necessary to ensure that component creation continues to work after plugins are unloaded. The typical scenario this aims to solve is:  
 <a href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="gz_2sim_2components_2Factory_8hh_source.html">Factory.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab3442f17e1c0b5c80765dbe177bd25dc"><td class="memItemLeft" align="right" valign="top">void IGNITION_GAZEBO_HIDDEN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#ab3442f17e1c0b5c80765dbe177bd25dc">Add</a> (<a class="el" href="structignition_1_1gazebo_1_1components_1_1RegistrationObjectId.html">RegistrationObjectId</a> _regObjId, <a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorBase.html">ComponentDescriptorBase</a> *_comp)</td></tr>
<tr class="memdesc:ab3442f17e1c0b5c80765dbe177bd25dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a component descriptor to the queue.  <a href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#ab3442f17e1c0b5c80765dbe177bd25dc">More...</a><br /></td></tr>
<tr class="separator:ab3442f17e1c0b5c80765dbe177bd25dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef396e6f18b894b0c14502950e493538"><td class="memItemLeft" align="right" valign="top">IGNITION_GAZEBO_HIDDEN <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classignition_1_1gazebo_1_1components_1_1BaseComponent.html">BaseComponent</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#aef396e6f18b894b0c14502950e493538">Create</a> () const</td></tr>
<tr class="memdesc:aef396e6f18b894b0c14502950e493538"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a component using the latest available component descriptor. This simply forward to <a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorBase.html#a9f643a46eda89f99c5e993a643121d58" title="Create an instance of a Component.">ComponentDescriptorBase::Create</a>.  <a href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#aef396e6f18b894b0c14502950e493538">More...</a><br /></td></tr>
<tr class="separator:aef396e6f18b894b0c14502950e493538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5db18ab970e7c088ca705a784c35dd2a"><td class="memItemLeft" align="right" valign="top">IGNITION_GAZEBO_HIDDEN <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt; <a class="el" href="classignition_1_1gazebo_1_1components_1_1BaseComponent.html">BaseComponent</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#a5db18ab970e7c088ca705a784c35dd2a">Create</a> (const <a class="el" href="classignition_1_1gazebo_1_1components_1_1BaseComponent.html">components::BaseComponent</a> *_data) const</td></tr>
<tr class="memdesc:a5db18ab970e7c088ca705a784c35dd2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a component using the latest available component descriptor. This simply forward to <a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorBase.html#a9f643a46eda89f99c5e993a643121d58" title="Create an instance of a Component.">ComponentDescriptorBase::Create</a>.  <a href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#a5db18ab970e7c088ca705a784c35dd2a">More...</a><br /></td></tr>
<tr class="separator:a5db18ab970e7c088ca705a784c35dd2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4c0810dd093332516bfb68c0190ee95"><td class="memItemLeft" align="right" valign="top">bool IGNITION_GAZEBO_HIDDEN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#af4c0810dd093332516bfb68c0190ee95">Empty</a> ()</td></tr>
<tr class="memdesc:af4c0810dd093332516bfb68c0190ee95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the queue is empty.  <a href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#af4c0810dd093332516bfb68c0190ee95">More...</a><br /></td></tr>
<tr class="separator:af4c0810dd093332516bfb68c0190ee95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b3de68afb8346831404f6edcbd5c8e5"><td class="memItemLeft" align="right" valign="top">void IGNITION_GAZEBO_HIDDEN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#a1b3de68afb8346831404f6edcbd5c8e5">Remove</a> (<a class="el" href="structignition_1_1gazebo_1_1components_1_1RegistrationObjectId.html">RegistrationObjectId</a> _regObjId)</td></tr>
<tr class="memdesc:a1b3de68afb8346831404f6edcbd5c8e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a component descriptor from the queue. This also deletes memory allocated for the component descriptor by the static component registration object.  <a href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorQueue.html#a1b3de68afb8346831404f6edcbd5c8e5">More...</a><br /></td></tr>
<tr class="separator:a1b3de68afb8346831404f6edcbd5c8e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class to hold the queue of component descriptors registered by translation units. This queue is necessary to ensure that component creation continues to work after plugins are unloaded. The typical scenario this aims to solve is: </p>
<ol type="1">
<li>Plugin P1 registers component descripter for component C1.</li>
<li>Plugin P1 gets unloaded.</li>
<li>Plugin P2 registers a component descriptor for component C1 and tries to create an instance of C1. When P1 gets unloaded, the destructor of the static component registration object calls <a class="el" href="classignition_1_1gazebo_1_1components_1_1Factory.html#a1107cad5543d376c4eefb0906c8ee494" title="Unregister a component so that the factory can&#39;t create instances of the component anymore.">Factory::Unregister</a> which removes the component descriptor from the queue. Without this step, P2 would attempt to use the component descriptor created by P1 in step 3 and likely segfault because the memory associated with that descriptor has been deleted when P1 was unloaded. </li>
</ol>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ab3442f17e1c0b5c80765dbe177bd25dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3442f17e1c0b5c80765dbe177bd25dc">&#9670;&nbsp;</a></span>Add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void IGNITION_GAZEBO_HIDDEN Add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structignition_1_1gazebo_1_1components_1_1RegistrationObjectId.html">RegistrationObjectId</a>&#160;</td>
          <td class="paramname"><em>_regObjId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorBase.html">ComponentDescriptorBase</a> *&#160;</td>
          <td class="paramname"><em>_comp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a component descriptor to the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_regObjId</td><td>An ID that identifies the registration object. This is generally derived from the <code>this</code> pointer of the static component registration object created when calling IGN_GAZEBO_REGISTER_COMPONENT. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_comp</td><td>The component descriptor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aef396e6f18b894b0c14502950e493538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef396e6f18b894b0c14502950e493538">&#9670;&nbsp;</a></span>Create() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IGNITION_GAZEBO_HIDDEN <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt;<a class="el" href="classignition_1_1gazebo_1_1components_1_1BaseComponent.html">BaseComponent</a>&gt; Create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a component using the latest available component descriptor. This simply forward to <a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorBase.html#a9f643a46eda89f99c5e993a643121d58" title="Create an instance of a Component.">ComponentDescriptorBase::Create</a>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorBase.html#a9f643a46eda89f99c5e993a643121d58" title="Create an instance of a Component.">ComponentDescriptorBase::Create</a> </dd></dl>

</div>
</div>
<a id="a5db18ab970e7c088ca705a784c35dd2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5db18ab970e7c088ca705a784c35dd2a">&#9670;&nbsp;</a></span>Create() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IGNITION_GAZEBO_HIDDEN <a class="elRef" href="http://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr</a>&lt;<a class="el" href="classignition_1_1gazebo_1_1components_1_1BaseComponent.html">BaseComponent</a>&gt; Create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classignition_1_1gazebo_1_1components_1_1BaseComponent.html">components::BaseComponent</a> *&#160;</td>
          <td class="paramname"><em>_data</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a component using the latest available component descriptor. This simply forward to <a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorBase.html#a9f643a46eda89f99c5e993a643121d58" title="Create an instance of a Component.">ComponentDescriptorBase::Create</a>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classignition_1_1gazebo_1_1components_1_1ComponentDescriptorBase.html#a9f643a46eda89f99c5e993a643121d58" title="Create an instance of a Component.">ComponentDescriptorBase::Create</a> </dd></dl>

</div>
</div>
<a id="af4c0810dd093332516bfb68c0190ee95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4c0810dd093332516bfb68c0190ee95">&#9670;&nbsp;</a></span>Empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool IGNITION_GAZEBO_HIDDEN Empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the queue is empty. </p>

</div>
</div>
<a id="a1b3de68afb8346831404f6edcbd5c8e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b3de68afb8346831404f6edcbd5c8e5">&#9670;&nbsp;</a></span>Remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void IGNITION_GAZEBO_HIDDEN Remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structignition_1_1gazebo_1_1components_1_1RegistrationObjectId.html">RegistrationObjectId</a>&#160;</td>
          <td class="paramname"><em>_regObjId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove a component descriptor from the queue. This also deletes memory allocated for the component descriptor by the static component registration object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_regObjId</td><td>An ID that identifies the registration object. This is generally derived from the <code>this</code> pointer of the static component registration object created when calling IGN_GAZEBO_REGISTER_COMPONENT. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="elRef" href="http://en.cppreference.com/w/cpp/algorithm/find.html">std::find_if()</a>, and <a class="elRef" href="http://en.cppreference.com/w/cpp/iterator/prev.html">std::prev()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="gz_2sim_2components_2Factory_8hh_source.html">gz/sim/components/Factory.hh</a></li>
</ul>
</div><!-- contents -->
      </div>
    </main>
  </div>
</body>
